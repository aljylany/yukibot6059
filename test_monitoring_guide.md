# دليل المراقبة والاختبار الشامل لنظام كشف المحتوى

## 🎯 كيفية التأكد من عمل النظام 100%

### 📋 طرق الاختبار المتاحة:

#### 1. **الأوامر المباشرة في البوت:**

##### `/test_filter` - اختبار النظام الشامل
```
يختبر:
✅ حالة النظام الشامل  
✅ عدد مفاتيح API المحملة
✅ حالة نموذج الذكاء الاصطناعي
✅ اختبارات سريعة للنصوص المختلفة
```

##### `/test_profanity [النص]` - اختبار نص محدد
```
مثال: /test_profanity شرموط
يعرض:
• نتيجة النظام الشامل
• نتيجة نظام كشف السباب
• مستوى الخطورة
• الكلمات المكتشفة
• النتيجة النهائية
```

##### `/monitor_filter` - مراقبة مكثفة
```
يفعل المراقبة المكثفة لمدة 30 ثانية
يسجل كل عملية فحص بالتفصيل في اللوجز
```

##### `/reset_violations [معرف المستخدم]` - إعادة تعيين المخالفات
```
أمر للسيد الأعلى فقط
يمحو سجل مخالفات مستخدم معين
```

#### 2. **اختبار ملف مستقل:**

```bash
python test_content_filter.py
```

يختبر:
- ✅ حالة النظام الكاملة
- ✅ فحص النصوص النظيفة والمسيئة
- ✅ كشف السباب المباشر والمموه
- ✅ نظام النقاط والعقوبات
- ✅ معدل نجاح الاختبارات

### 📊 مراقبة السجلات (Logs) في الوقت الفعلي:

#### عند إرسال أي محتوى، ستظهر رسائل مثل:

##### **للمحتوى النظيف:**
```
INFO - 🔍 بدء الفحص الشامل للمحتوى من المستخدم 123456
INFO - 📋 المحتوى المراد فحصه: نص: 'مرحبا كيف الحال'
INFO - 🔍 فحص النص: 'مرحبا كيف الحال'
INFO - ✅ النص نظيف
INFO - ✅ المحتوى نظيف - لا توجد مخالفات
```

##### **للمحتوى المسيء:**
```
INFO - 🔍 بدء الفحص الشامل للمحتوى من المستخدم 123456
INFO - 📋 المحتوى المراد فحصه: نص: 'شرموط'
INFO - 🔍 فحص النص: 'شرموط'
WARNING - ⚠️ مخالفة نصية: text_profanity (خطورة: 3)
WARNING - 🚨 تم اكتشاف مخالفات من المستخدم 123456: 1 مخالفة
WARNING - 📝 مخالفة 1: text_profanity (خطورة: 3) - شرموط
INFO - ✅ تم حذف المحتوى المخالف من 123456
```

##### **للصور:**
```
INFO - 🔍 فحص الصورة...
INFO - ✅ الصورة نظيفة
```

##### **للملصقات:**
```
INFO - 🔍 فحص الملصق: 😊
INFO - ✅ الملصق نظيف
```

### 🧪 اختبارات مقترحة للتأكد من العمل:

#### اختبار النصوص:
1. **نصوص نظيفة:**
   - "مرحبا كيف الحال"
   - "أهلا وسهلا"
   - "شكرا لك"

2. **سباب مباشر:**
   - "شرموط" (يجب أن يُكشف)
   - "كسك" (يجب أن يُكشف)
   - "زبك" (يجب أن يُكشف)

3. **سباب مموه:**
   - "ش ر م و ط" (يجب أن يُكشف)
   - "ش*ر*م*و*ط" (يجب أن يُكشف)
   - "شرم0ط" (يجب أن يُكشف)

4. **محتوى جنسي:**
   - "محتوى إباحي" (يجب أن يُكشف)
   - "صور عارية" (يجب أن يُكشف)

#### اختبار الملصقات:
1. **ملصقات عادية:** ✅ (يجب أن تمر)
2. **ملصقات مشبوهة:** 🍆💦 (قد تُكشف حسب الإعدادات)

#### اختبار الصور:
1. **صور عادية:** منظر طبيعي (يجب أن تمر)
2. **صور مشبوهة:** ستحتاج للذكاء الاصطناعي للكشف

### 🔍 كيفية مراقبة النظام:

#### 1. **مراقبة فورية:**
```bash
# تشغيل أمر المراقبة المكثفة في البوت
/monitor_filter
```

#### 2. **مراقبة السجلات:**
- تابع نافذة console في Replit
- ابحث عن الرسائل التي تبدأ بـ 🔍 أو ⚠️ أو ✅

#### 3. **اختبار دوري:**
```bash
# تشغيل الاختبار الشامل
/test_filter

# اختبار نص محدد
/test_profanity النص_المراد_اختباره
```

### 📈 مؤشرات النجاح:

#### ✅ **النظام يعمل بشكل صحيح إذا:**
1. أوامر الاختبار تعرض معلومات النظام بوضوح
2. النصوص المسيئة تُحذف فوراً
3. تظهر رسائل تحذيرية في اللوجز
4. المستخدمين يحصلون على عقوبات متدرجة
5. المحتوى النظيف يمر بدون مشاكل

#### ❌ **مؤشرات وجود مشاكل:**
1. عدم ظهور رسائل فحص في اللوجز
2. عدم حذف المحتوى المسيء
3. عدم عمل أوامر الاختبار
4. ظهور رسائل خطأ متكررة

### 🛠️ حل المشاكل الشائعة:

#### **المشكلة:** النظام لا يفحص المحتوى
**الحل:**
```bash
# تأكد من تفعيل النظام
/test_filter

# تحقق من اللوجز للأخطاء
```

#### **المشكلة:** الذكاء الاصطناعي لا يعمل للصور
**الحل:**
- تأكد من وجود مفاتيح Google AI في api.txt
- تحقق من الاتصال بالإنترنت

#### **المشكلة:** بعض الكلمات السيئة لا تُكشف
**الحل:**
```bash
# اختبر الكلمة المحددة
/test_profanity الكلمة_المشبوهة

# أضف الكلمة لقاعدة البيانات إذا لزم الأمر
```

### 📊 التقارير والإحصائيات:

#### أوامر مراقبة إضافية:
- `احصائيات الأمان` - إحصائيات شاملة
- `تقرير المجموعة` - تقرير مفصل للمجموعة  
- `حالة النظام` - حالة النظام الحالية
- `تحليل المخاطر` - تحليل مخاطر المجموعة

### 🔐 ملاحظات مهمة:

1. **الأسياد محميون:** السيد الأعلى والأسياد لا يخضعون للفحص
2. **التسجيل المفصل:** كل عملية فحص مسجلة في اللوجز
3. **النظام التراكمي:** المخالفات تتراكم وتؤدي لعقوبات أقوى
4. **الفحص الشامل:** يشمل النصوص والصور والملصقات والفيديوهات
5. **التحديث المستمر:** النظام يتعلم ويتحسن باستمرار

---

## 🎯 الخلاصة:

النظام يعمل بشكل تلقائي في الخلفية، ولكن يمكنك التأكد من عمله من خلال:
1. مراقبة اللوجز أثناء إرسال محتوى مختلف
2. استخدام أوامر الاختبار المخصصة  
3. مراقبة حذف المحتوى المسيء وتطبيق العقوبات
4. تشغيل الاختبارات الدورية للتأكد من الأداء